{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/user.service\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"ngx-toastr\";\nimport * as i4 from \"@angular/common\";\nfunction UserProfileComponent_div_0_button_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 21);\n    i0.ɵɵlistener(\"click\", function UserProfileComponent_div_0_button_7_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r7.toggleEdit());\n    });\n    i0.ɵɵelement(1, \"i\", 22);\n    i0.ɵɵtext(2, \" Edit Profile \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UserProfileComponent_div_0_form_9_span_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"span\", 34);\n  }\n}\nfunction UserProfileComponent_div_0_form_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"form\", 12);\n    i0.ɵɵlistener(\"ngSubmit\", function UserProfileComponent_div_0_form_9_Template_form_ngSubmit_0_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r10 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r10.onProfileSubmit());\n    });\n    i0.ɵɵelementStart(1, \"div\", 11)(2, \"label\", 23);\n    i0.ɵɵtext(3, \"Username\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(4, \"input\", 24);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 11)(6, \"label\", 25);\n    i0.ɵɵtext(7, \"Email\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(8, \"input\", 26);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"div\", 11)(10, \"label\", 27);\n    i0.ɵɵtext(11, \"Full Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(12, \"input\", 28);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"div\", 11)(14, \"label\", 29);\n    i0.ɵɵtext(15, \"Address\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(16, \"textarea\", 30);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"div\", 31)(18, \"button\", 32);\n    i0.ɵɵtemplate(19, UserProfileComponent_div_0_form_9_span_19_Template, 1, 0, \"span\", 20);\n    i0.ɵɵtext(20, \" Save Changes \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"button\", 33);\n    i0.ɵɵlistener(\"click\", function UserProfileComponent_div_0_form_9_Template_button_click_21_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r12 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r12.toggleEdit());\n    });\n    i0.ɵɵtext(22, \" Cancel \");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"formGroup\", ctx_r3.profileForm);\n    i0.ɵɵadvance(18);\n    i0.ɵɵproperty(\"disabled\", ctx_r3.loading || ctx_r3.profileForm.invalid);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.loading);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", ctx_r3.loading);\n  }\n}\nfunction UserProfileComponent_div_0_ng_template_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13)(1, \"div\", 14)(2, \"h6\");\n    i0.ɵɵtext(3, \"Username\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"div\", 14)(7, \"h6\");\n    i0.ɵɵtext(8, \"Email\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"p\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"div\", 14)(12, \"h6\");\n    i0.ɵɵtext(13, \"Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"p\");\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(16, \"div\", 35)(17, \"h6\");\n    i0.ɵɵtext(18, \"Address\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"p\");\n    i0.ɵɵtext(20);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r5.user.username);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r5.user.email);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r5.user.name || \"Not provided\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r5.user.address || \"Not provided\");\n  }\n}\nfunction UserProfileComponent_div_0_span_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"span\", 34);\n  }\n}\nfunction UserProfileComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 2)(1, \"div\", 3)(2, \"div\", 4)(3, \"div\", 5)(4, \"div\", 6)(5, \"h4\");\n    i0.ɵɵtext(6, \"User Profile\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(7, UserProfileComponent_div_0_button_7_Template, 3, 0, \"button\", 7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\", 8);\n    i0.ɵɵtemplate(9, UserProfileComponent_div_0_form_9_Template, 23, 4, \"form\", 9);\n    i0.ɵɵtemplate(10, UserProfileComponent_div_0_ng_template_10_Template, 21, 4, \"ng-template\", null, 10, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelement(12, \"hr\");\n    i0.ɵɵelementStart(13, \"h5\", 11);\n    i0.ɵɵtext(14, \"Change Password\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"form\", 12);\n    i0.ɵɵlistener(\"ngSubmit\", function UserProfileComponent_div_0_Template_form_ngSubmit_15_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.onChangePassword());\n    });\n    i0.ɵɵelementStart(16, \"div\", 13)(17, \"div\", 14)(18, \"label\", 15);\n    i0.ɵɵtext(19, \"Current Password\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(20, \"input\", 16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"div\", 14)(22, \"label\", 17);\n    i0.ɵɵtext(23, \"New Password\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(24, \"input\", 18);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(25, \"button\", 19);\n    i0.ɵɵtemplate(26, UserProfileComponent_div_0_span_26_Template, 1, 0, \"span\", 20);\n    i0.ɵɵtext(27, \" Update Password \");\n    i0.ɵɵelementEnd()()()()()()();\n  }\n  if (rf & 2) {\n    const _r4 = i0.ɵɵreference(11);\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.isEditing);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isEditing)(\"ngIfElse\", _r4);\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"formGroup\", ctx_r0.passwordForm);\n    i0.ɵɵadvance(10);\n    i0.ɵɵproperty(\"disabled\", ctx_r0.passwordForm.invalid || ctx_r0.loading);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.loading);\n  }\n}\nfunction UserProfileComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 36)(1, \"div\", 37)(2, \"span\", 38);\n    i0.ɵɵtext(3, \"Loading...\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"p\", 39);\n    i0.ɵɵtext(5, \"Loading user profile...\");\n    i0.ɵɵelementEnd()();\n  }\n}\nexport let UserProfileComponent = /*#__PURE__*/(() => {\n  class UserProfileComponent {\n    constructor(userService, fb, toastr) {\n      this.userService = userService;\n      this.fb = fb;\n      this.toastr = toastr;\n      this.loading = false;\n      this.isEditing = false;\n      this.user = null;\n      this.profileForm = this.fb.group({\n        username: ['', [Validators.required]],\n        email: ['', [Validators.required, Validators.email]],\n        name: [''],\n        address: ['']\n      });\n      this.passwordForm = this.fb.group({\n        currentPassword: ['', [Validators.required, Validators.minLength(6)]],\n        newPassword: ['', [Validators.required, Validators.minLength(6)]]\n      });\n    }\n    ngOnInit() {\n      this.loadUserProfile();\n    }\n    loadUserProfile() {\n      this.loading = true;\n      this.userService.getUserProfile().subscribe({\n        next: user => {\n          this.user = user;\n          this.profileForm.patchValue({\n            username: user.username,\n            email: user.email,\n            name: user.name || '',\n            address: user.address || ''\n          });\n        },\n        error: err => {\n          this.toastr.error('Failed to load user profile');\n          console.error('Error loading profile:', err);\n        },\n        complete: () => this.loading = false\n      });\n    }\n    onProfileSubmit() {\n      if (this.profileForm.valid) {\n        this.loading = true;\n        this.userService.updateUserProfile(this.profileForm.value).subscribe({\n          next: updatedUser => {\n            this.user = updatedUser;\n            this.isEditing = false;\n            this.toastr.success('Profile updated successfully');\n          },\n          error: err => {\n            this.toastr.error('Failed to update profile');\n            console.error('Error updating profile:', err);\n          },\n          complete: () => this.loading = false\n        });\n      }\n    }\n    onChangePassword() {\n      if (this.passwordForm.valid) {\n        this.loading = true;\n        const {\n          currentPassword,\n          newPassword\n        } = this.passwordForm.value;\n        this.userService.updatePassword(currentPassword, newPassword).subscribe({\n          next: () => {\n            this.toastr.success('Password updated successfully');\n            this.passwordForm.reset();\n          },\n          error: err => {\n            this.toastr.error('Failed to update password');\n            console.error('Error updating password:', err);\n          },\n          complete: () => this.loading = false\n        });\n      }\n    }\n    toggleEdit() {\n      this.isEditing = !this.isEditing;\n    }\n    static {\n      this.ɵfac = function UserProfileComponent_Factory(t) {\n        return new (t || UserProfileComponent)(i0.ɵɵdirectiveInject(i1.UserService), i0.ɵɵdirectiveInject(i2.FormBuilder), i0.ɵɵdirectiveInject(i3.ToastrService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: UserProfileComponent,\n        selectors: [[\"app-user-profile\"]],\n        decls: 2,\n        vars: 2,\n        consts: [[\"class\", \"container mt-4\", 4, \"ngIf\"], [\"class\", \"text-center mt-5\", 4, \"ngIf\"], [1, \"container\", \"mt-4\"], [1, \"row\", \"justify-content-center\"], [1, \"col-md-8\"], [1, \"card\"], [1, \"card-header\", \"d-flex\", \"justify-content-between\", \"align-items-center\"], [\"class\", \"btn btn-primary\", 3, \"click\", 4, \"ngIf\"], [1, \"card-body\"], [3, \"formGroup\", \"ngSubmit\", 4, \"ngIf\", \"ngIfElse\"], [\"viewMode\", \"\"], [1, \"mb-3\"], [3, \"formGroup\", \"ngSubmit\"], [1, \"row\"], [1, \"col-md-6\", \"mb-3\"], [\"for\", \"currentPassword\", 1, \"form-label\"], [\"type\", \"password\", \"id\", \"currentPassword\", \"formControlName\", \"currentPassword\", \"required\", \"\", 1, \"form-control\"], [\"for\", \"newPassword\", 1, \"form-label\"], [\"type\", \"password\", \"id\", \"newPassword\", \"formControlName\", \"newPassword\", \"required\", \"\", 1, \"form-control\"], [\"type\", \"submit\", 1, \"btn\", \"btn-warning\", 3, \"disabled\"], [\"class\", \"spinner-border spinner-border-sm me-1\", 4, \"ngIf\"], [1, \"btn\", \"btn-primary\", 3, \"click\"], [1, \"bi\", \"bi-pencil\"], [\"for\", \"username\", 1, \"form-label\"], [\"type\", \"text\", \"id\", \"username\", \"formControlName\", \"username\", \"required\", \"\", 1, \"form-control\"], [\"for\", \"email\", 1, \"form-label\"], [\"type\", \"email\", \"id\", \"email\", \"formControlName\", \"email\", \"required\", \"\", 1, \"form-control\"], [\"for\", \"name\", 1, \"form-label\"], [\"type\", \"text\", \"id\", \"name\", \"formControlName\", \"name\", 1, \"form-control\"], [\"for\", \"address\", 1, \"form-label\"], [\"id\", \"address\", \"formControlName\", \"address\", \"rows\", \"3\", 1, \"form-control\"], [1, \"d-flex\", \"gap-2\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\"], [\"type\", \"button\", 1, \"btn\", \"btn-outline-secondary\", 3, \"disabled\", \"click\"], [1, \"spinner-border\", \"spinner-border-sm\", \"me-1\"], [1, \"col-md-12\", \"mb-3\"], [1, \"text-center\", \"mt-5\"], [\"role\", \"status\", 1, \"spinner-border\", \"text-primary\"], [1, \"visually-hidden\"], [1, \"mt-2\"]],\n        template: function UserProfileComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵtemplate(0, UserProfileComponent_div_0_Template, 28, 6, \"div\", 0);\n            i0.ɵɵtemplate(1, UserProfileComponent_div_1_Template, 6, 0, \"div\", 1);\n          }\n          if (rf & 2) {\n            i0.ɵɵproperty(\"ngIf\", ctx.user);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", !ctx.user && !ctx.loading);\n          }\n        },\n        dependencies: [i4.NgIf, i2.ɵNgNoValidate, i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i2.RequiredValidator, i2.FormGroupDirective, i2.FormControlName],\n        styles: [\".card[_ngcontent-%COMP%]{box-shadow:0 4px 6px #0000001a;border:none;border-radius:10px;margin-bottom:2rem}.card-header[_ngcontent-%COMP%]{background-color:#f8f9fa;border-bottom:1px solid #eee;border-top-left-radius:10px!important;border-top-right-radius:10px!important}h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{color:#333;margin-bottom:1rem}h6[_ngcontent-%COMP%]{font-weight:600;color:#555;margin-bottom:.25rem}p[_ngcontent-%COMP%]{color:#666;margin-bottom:1rem}.form-label[_ngcontent-%COMP%]{font-weight:500;color:#555}.btn[_ngcontent-%COMP%]{padding:.5rem 1.25rem;border-radius:5px;font-weight:500;transition:all .2s}.btn-primary[_ngcontent-%COMP%]{background-color:#0d6efd;border-color:#0d6efd}.btn-warning[_ngcontent-%COMP%]{background-color:#ffc107;border-color:#ffc107;color:#000}.btn-outline-secondary[_ngcontent-%COMP%]{border-color:#dee2e6;color:#6c757d}.btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 8px #0000001a}.form-control[_ngcontent-%COMP%]{border-radius:5px;border:1px solid #dee2e6;padding:.5rem .75rem}textarea.form-control[_ngcontent-%COMP%]{min-height:100px}.spinner-border[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem;border-width:.2em}hr[_ngcontent-%COMP%]{margin:2rem 0;border-top:1px solid #eee}@media (max-width: 768px){.card[_ngcontent-%COMP%]{margin:0 -15px;border-radius:0}.card-header[_ngcontent-%COMP%]{border-radius:0!important}}\"]\n      });\n    }\n  }\n  return UserProfileComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}