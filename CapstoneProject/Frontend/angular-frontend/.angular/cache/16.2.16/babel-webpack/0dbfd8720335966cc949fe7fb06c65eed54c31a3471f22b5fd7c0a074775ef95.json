{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/api.service\";\nimport * as i2 from \"../services/user.service\";\nimport * as i3 from \"ngx-toastr\";\nfunction CatalogComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 6)(1, \"div\", 7)(2, \"span\", 8);\n    i0.ɵɵtext(3, \"Loading...\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"p\", 9);\n    i0.ɵɵtext(5, \"Loading products...\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction CatalogComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 10);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementStart(2, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function CatalogComponent_div_4_Template_button_click_2_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.loadProducts());\n    });\n    i0.ɵɵtext(3, \"Retry\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.error, \" \");\n  }\n}\nfunction CatalogComponent_div_5_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 14)(1, \"div\", 15)(2, \"div\", 16)(3, \"h5\", 17);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\", 18);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\", 19)(8, \"div\", 20)(9, \"span\", 21);\n    i0.ɵɵtext(10);\n    i0.ɵɵpipe(11, \"number\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"span\", 22);\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(14, \"button\", 23);\n    i0.ɵɵlistener(\"click\", function CatalogComponent_div_5_div_1_Template_button_click_14_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r9);\n      const product_r7 = restoredCtx.$implicit;\n      const ctx_r8 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r8.addToCart(product_r7));\n    });\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const product_r7 = ctx.$implicit;\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(product_r7.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(product_r7.description || \"No description available\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"\\u20B9\", i0.ɵɵpipeBind2(11, 9, product_r7.price, \"1.2-2\"), \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngClass\", product_r7.quantity > 0 ? \"bg-success\" : \"bg-danger\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", product_r7.quantity > 0 ? product_r7.quantity + \" in stock\" : \"Out of stock\", \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassProp(\"btn-sm\", true);\n    i0.ɵɵproperty(\"disabled\", !ctx_r6.userService.isLoggedIn() || product_r7.quantity <= 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r6.userService.isLoggedIn() ? \"Add to Cart\" : \"Login to Purchase\", \" \");\n  }\n}\nfunction CatalogComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵtemplate(1, CatalogComponent_div_5_div_1_Template, 16, 12, \"div\", 13);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.products);\n  }\n}\nfunction CatalogComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24);\n    i0.ɵɵelement(1, \"i\", 25);\n    i0.ɵɵelementStart(2, \"h4\", 26);\n    i0.ɵɵtext(3, \"No Products Available\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\", 27);\n    i0.ɵɵtext(5, \"Check back later for new products.\");\n    i0.ɵɵelementEnd()();\n  }\n}\nexport let CatalogComponent = /*#__PURE__*/(() => {\n  class CatalogComponent {\n    constructor(api, userService, toastr) {\n      this.api = api;\n      this.userService = userService;\n      this.toastr = toastr;\n      this.products = [];\n      this.loading = true;\n      this.error = null;\n    }\n    ngOnInit() {\n      this.loadProducts();\n    }\n    loadProducts() {\n      this.loading = true;\n      this.error = null;\n      this.api.getProducts().subscribe({\n        next: products => {\n          this.products = products || [];\n          this.loading = false;\n        },\n        error: err => {\n          console.error('Error loading products:', err);\n          this.error = 'Failed to load products. Please try again later.';\n          this.loading = false;\n        }\n      });\n    }\n    addToCart(product) {\n      if (!this.userService.isLoggedIn()) {\n        this.toastr.warning('Please log in to add items to cart');\n        return;\n      }\n      if (product.quantity <= 0) {\n        this.toastr.warning('This product is out of stock');\n        return;\n      }\n      this.api.addToCart(product.id, 1).subscribe({\n        next: () => {\n          this.toastr.success('Added to cart!', product.name);\n        },\n        error: err => {\n          console.error('Error adding to cart:', err);\n          this.toastr.error('Failed to add item to cart. Please try again.');\n        }\n      });\n    }\n    static {\n      this.ɵfac = function CatalogComponent_Factory(t) {\n        return new (t || CatalogComponent)(i0.ɵɵdirectiveInject(i1.ApiService), i0.ɵɵdirectiveInject(i2.UserService), i0.ɵɵdirectiveInject(i3.ToastrService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: CatalogComponent,\n        selectors: [[\"catalog\"]],\n        decls: 7,\n        vars: 4,\n        consts: [[1, \"container\", \"mt-4\"], [1, \"mb-4\"], [\"class\", \"text-center\", 4, \"ngIf\"], [\"class\", \"alert alert-danger\", 4, \"ngIf\"], [\"class\", \"row\", 4, \"ngIf\"], [\"class\", \"text-center py-5\", 4, \"ngIf\"], [1, \"text-center\"], [\"role\", \"status\", 1, \"spinner-border\"], [1, \"visually-hidden\"], [1, \"mt-2\"], [1, \"alert\", \"alert-danger\"], [1, \"btn\", \"btn-sm\", \"btn-outline-secondary\", \"ms-2\", 3, \"click\"], [1, \"row\"], [\"class\", \"col-md-4 mb-4\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-md-4\", \"mb-4\"], [1, \"card\", \"h-100\"], [1, \"card-body\", \"d-flex\", \"flex-column\"], [1, \"card-title\"], [1, \"card-text\", \"flex-grow-1\"], [1, \"mt-auto\"], [1, \"d-flex\", \"justify-content-between\", \"align-items-center\", \"mb-2\"], [1, \"h5\", \"mb-0\"], [1, \"badge\", 3, \"ngClass\"], [1, \"btn\", \"btn-outline-primary\", \"w-100\", 3, \"disabled\", \"click\"], [1, \"text-center\", \"py-5\"], [1, \"bi\", \"bi-inbox\", 2, \"font-size\", \"3rem\", \"opacity\", \"0.5\"], [1, \"mt-3\"], [1, \"text-muted\"]],\n        template: function CatalogComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"h3\", 1);\n            i0.ɵɵtext(2, \"Product Catalog\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(3, CatalogComponent_div_3_Template, 6, 0, \"div\", 2);\n            i0.ɵɵtemplate(4, CatalogComponent_div_4_Template, 4, 1, \"div\", 3);\n            i0.ɵɵtemplate(5, CatalogComponent_div_5_Template, 2, 1, \"div\", 4);\n            i0.ɵɵtemplate(6, CatalogComponent_div_6_Template, 6, 0, \"div\", 5);\n            i0.ɵɵelementEnd();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"ngIf\", ctx.loading);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.error);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", !ctx.loading && !ctx.error);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", !ctx.loading && !ctx.error && ctx.products.length === 0);\n          }\n        },\n        styles: [\".card[_ngcontent-%COMP%]{transition:transform .2s}.card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 4px 8px #0000001a}\"]\n      });\n    }\n  }\n  return CatalogComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}